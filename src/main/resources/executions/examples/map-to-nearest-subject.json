// We want to work out the correlation between the number of cars (incl. taxis)
// passing by a road traffic counter, and the angular betweenness centrality
// of the road segment that traffic counter is on
{
  "dataset" : {
    "subjects" : [
      {
        // The subject output is a traffic counter from DfT
        "subjectType" : "trafficCounter",
        "provider": "uk.gov.dft"
      }
    ],
    "datasources" : [
      {
        // Importer for DfT traffic counts for Milton Keynes
        "importerClass" : "uk.org.tombolo.importer.dft.TrafficCountImporter",
        "datasourceId" : "trafficCounts",
        "geographyScope" : ["Milton Keynes"]
      },
      {
        // Importer for the Space Syntax Open Space Map
        "importerClass" : "uk.org.tombolo.importer.spacesyntax.OpenSpaceNetworkImporter",
        "datasourceId" : "milton_keynes.osm_polyline_processed"
      }
    ],
    "fields" : [
      {
        // Filed for returning the latest count of cars and taxis for the traffic counter
      "fieldClass": "uk.org.tombolo.field.value.LatestValueField",
        "label": "CountPedalCycles",
        "attribute": {
          "providerLabel" : "uk.gov.dft",
          "attributeLabel" : "CountCarsTaxis"
        }
      },
      {
        // Field for returning the angular betweenness centrality for the 'nearest road segment' to the traffic counter.
        // We use the 'nearest road segment' as a means to determine which segment the traffic counter is on
        "fieldClass": "uk.org.tombolo.field.aggregation.MapToNearestSubjectField",
        "label": "centrality",
        "nearestSubjectType": "SSxNode",
        "maxRadius": 0.001,
        "fieldSpecification": {
          "fieldClass": "uk.org.tombolo.field.value.FixedValueField",
          "label": "centrality",
          "attribute": {
            "providerLabel": "com.spacesyntax",
            "attributeLabel": "abwc_n"
          }
        }
      }
    ]
  },
  "exporter" : "uk.org.tombolo.exporter.CSVExporter"
}
